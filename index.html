<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yeeps-Share</title>
    <style>
        /* YEEPS THEME CSS */
        :root {
            --yeeps-orange: #FF8C00;
            --yeeps-yellow: #FFD700;
            --yeeps-blue: #87CEEB;
            --yeeps-dark: #333;
        }

        body {
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
            background-color: var(--yeeps-blue);
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
        }

        h1 {
            color: white;
            text-shadow: 3px 3px 0px var(--yeeps-orange);
            font-size: 3rem;
            margin-bottom: 10px;
        }

        /* FEATURED SECTION */
        #featured-zone {
            width: 100%;
            max-width: 550px;
            margin-bottom: 20px;
            display: none; /* Hidden if empty */
        }

        .featured-label {
            background-color: var(--yeeps-yellow);
            color: var(--yeeps-dark);
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.2rem;
            display: inline-block;
            margin-bottom: 10px;
            border: 2px solid white;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }

        /* INPUT AREA */
        .input-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            width: 100%;
            max-width: 550px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 30px;
            border: 4px solid var(--yeeps-orange);
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
        }

        input, select {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
        }

        button.post-btn {
            padding: 12px;
            background-color: var(--yeeps-orange);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
            transition: transform 0.1s;
        }

        button.post-btn:active { transform: scale(0.95); }

        /* FEED AREA */
        #feed {
            width: 100%;
            max-width: 550px;
        }

        .post {
            background: white;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 0 rgba(0,0,0,0.05);
            position: relative;
            border: 2px solid transparent;
        }

        /* Special style for Pinned/Featured posts */
        .post.pinned {
            border: 4px solid var(--yeeps-yellow);
            background: #fffbea;
        }

        .post-content {
            font-size: 1.1rem;
            margin-bottom: 10px;
            word-wrap: break-word;
        }

        .media-display {
            width: 100%;
            border-radius: 10px;
            margin-top: 10px;
        }

        /* Link Card Style */
        .link-card {
            display: block;
            background: #f0f2f5;
            padding: 15px;
            border-radius: 10px;
            text-decoration: none;
            color: #007bff;
            font-weight: bold;
            border: 1px solid #ddd;
            margin-top: 10px;
        }
        .link-card:hover { background: #e4e6eb; }

        /* Admin Controls */
        .admin-controls {
            border-top: 1px solid #eee;
            margin-top: 10px;
            padding-top: 10px;
            display: none; /* Hidden by default */
            justify-content: flex-end;
            gap: 10px;
        }

        .admin-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.8rem;
        }
        .pin-btn { background-color: var(--yeeps-yellow); color: black; }
        .del-btn { background-color: #ff4d4d; color: white; }

        /* Footer Login */
        footer {
            margin-top: 50px;
            color: rgba(255,255,255,0.6);
            font-size: 0.8rem;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <h1>üß± Yeeps-Share</h1>

    <div id="featured-zone">
        <div class="featured-label">‚≠ê Featured Posts</div>
        <div id="featured-feed"></div>
    </div>

    <div class="input-container">
        <h3>Create a Post</h3>
        <input type="text" id="postText" placeholder="Write something...">
        
        <select id="mediaType">
            <option value="none">Text Only</option>
            <option value="link">üîó Share a Link (URL)</option>
            <option value="image">üñºÔ∏è Image URL</option>
            <option value="video">üé• Video URL (mp4)</option>
        </select>

        <input type="text" id="mediaUrl" placeholder="Paste link here..." style="display:none;">

        <button class="post-btn" onclick="addPost()">Post It!</button>
    </div>

    <div id="feed"></div>

    <footer onclick="attemptLogin()">Admin Login</footer>

    <script>
        // --- CONFIGURATION ---
        const ADMIN_PASSWORD = "yeeps"; // <--- CHANGE THIS PASSWORD!
        // ---------------------

        let isAdmin = false;

        // 1. Handle Input Toggle
        const typeSelector = document.getElementById('mediaType');
        const urlInput = document.getElementById('mediaUrl');

        typeSelector.addEventListener('change', function() {
            if (this.value === 'none') {
                urlInput.style.display = 'none';
            } else {
                urlInput.style.display = 'block';
                // Update placeholder based on type
                if(this.value === 'link') urlInput.placeholder = "https://example.com";
                if(this.value === 'image') urlInput.placeholder = "https://... (ends in .jpg/.png)";
                if(this.value === 'video') urlInput.placeholder = "https://... (ends in .mp4)";
            }
        });

        // 2. Load Data
        document.addEventListener('DOMContentLoaded', loadPosts);

        function addPost() {
            const textInput = document.getElementById('postText');
            const typeInput = document.getElementById('mediaType');
            const urlInputBox = document.getElementById('mediaUrl');

            if (textInput.value === '' && urlInputBox.value === '') {
                alert("Write something!");
                return;
            }

            const post = {
                id: Date.now(),
                content: textInput.value,
                mediaType: typeInput.value,
                mediaUrl: urlInputBox.value,
                isPinned: false // Default is not pinned
            };

            saveToStorage(post);
            // Reload to show in correct order
            loadPosts(); 

            // Clear inputs
            textInput.value = '';
            urlInputBox.value = '';
            typeInput.value = 'none';
            urlInputBox.style.display = 'none';
        }

        function renderPost(post) {
            const postDiv = document.createElement('div');
            postDiv.className = `post ${post.isPinned ? 'pinned' : ''}`;
            postDiv.id = post.id;

            let mediaHTML = '';
            
            // --- NEW: URL LOGIC ---
            if (post.mediaType === 'link' && post.mediaUrl) {
                mediaHTML = `<a href="${post.mediaUrl}" target="_blank" class="link-card">üîó Visit Link: ${post.mediaUrl}</a>`;
            } else if (post.mediaType === 'image' && post.mediaUrl) {
                mediaHTML = `<img src="${post.mediaUrl}" class="media-display" loading="lazy">`;
            } else if (post.mediaType === 'video' && post.mediaUrl) {
                mediaHTML = `<video controls class="media-display"><source src="${post.mediaUrl}" type="video/mp4"></video>`;
            }

            // Admin buttons (hidden unless logged in)
            const adminPanel = `
                <div class="admin-controls" style="display: ${isAdmin ? 'flex' : 'none'}">
                    <button class="admin-btn pin-btn" onclick="togglePin(${post.id})">
                        ${post.isPinned ? 'Un-Star' : '‚≠ê Star This'}
                    </button>
                    <button class="admin-btn del-btn" onclick="deletePost(${post.id})">Delete</button>
                </div>
            `;

            postDiv.innerHTML = `
                <div class="post-content">${post.content}</div>
                ${mediaHTML}
                ${adminPanel}
            `;

            return postDiv;
        }

        function loadPosts() {
            let posts = JSON.parse(localStorage.getItem('yeepsPosts')) || [];
            
            const mainFeed = document.getElementById('feed');
            const featuredFeed = document.getElementById('featured-feed');
            const featuredZone = document.getElementById('featured-zone');
            
            mainFeed.innerHTML = '';
            featuredFeed.innerHTML = '';

            let hasFeatured = false;

            // Sort logic: Pinned items separate from normal items
            posts.forEach(post => {
                const postElement = renderPost(post);
                
                if (post.isPinned) {
                    featuredFeed.prepend(postElement);
                    hasFeatured = true;
                } else {
                    mainFeed.prepend(postElement);
                }
            });

            // Show/Hide Featured Header based on if there are any
            featuredZone.style.display = hasFeatured ? 'block' : 'none';
        }

        // --- STORAGE & ADMIN FUNCTIONS ---

        function saveToStorage(post) {
            let posts = JSON.parse(localStorage.getItem('yeepsPosts')) || [];
            posts.push(post);
            localStorage.setItem('yeepsPosts', JSON.stringify(posts));
        }

        function deletePost(id) {
            if (!isAdmin) return;
            if(!confirm("Delete this post?")) return;
            
            let posts = JSON.parse(localStorage.getItem('yeepsPosts')) || [];
            posts = posts.filter(post => post.id !== id);
            localStorage.setItem('yeepsPosts', JSON.stringify(posts));
            loadPosts();
        }

        function togglePin(id) {
            if (!isAdmin) return;

            let posts = JSON.parse(localStorage.getItem('yeepsPosts')) || [];
            // Find post and flip the 'isPinned' setting
            const postIndex = posts.findIndex(p => p.id === id);
            if (postIndex > -1) {
                posts[postIndex].isPinned = !posts[postIndex].isPinned;
                localStorage.setItem('yeepsPosts', JSON.stringify(posts));
                loadPosts();
            }
        }

        function attemptLogin() {
            const pass = prompt("Enter Admin Password:");
            if (pass === ADMIN_PASSWORD) {
                isAdmin = true;
                alert("Admin Mode Active! You can now Star and Delete posts.");
                loadPosts(); // Refresh to show buttons
            } else {
                alert("Wrong password!");
            }
        }
    </script>
</body>
</html>
