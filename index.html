            <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Yeeps-Share | Home</title>
    <style>
        :root { 
            --yeeps-orange: #FF8C00; 
            --yeeps-yellow: #FFD700; 
            --yeeps-blue: #87CEEB; 
            --role-owner: #FFD700;
            --role-dev: #5865F2;
            --role-mod: #3BA55D;
            --role-rat: #9ea1a4;
            --role-webdev: #202225;
            --role-reviewer: #9b59b6;
        }
        body { font-family: 'Comic Sans MS', sans-serif; background: var(--yeeps-blue); display: flex; flex-direction: column; align-items: center; padding-top: 80px; margin: 0; }
        
        .top-nav { position: fixed; top: 0; width: 100%; background: rgba(0,0,0,0.8); padding: 10px; display: flex; justify-content: center; gap: 20px; z-index: 1000; }
        .top-nav a { color: white; text-decoration: none; font-weight: bold; }

        .input-box { background: white; padding: 20px; border-radius: 15px; width: 450px; margin-bottom: 20px; border: 4px solid var(--yeeps-orange); box-shadow: 0 6px 0 rgba(0,0,0,0.1); }
        input { width: 90%; padding: 10px; margin-bottom: 10px; border-radius: 8px; border: 2px solid #ddd; font-family: inherit; }
        
        .post { background: white; padding: 15px; margin-bottom: 20px; border-radius: 15px; width: 450px; box-shadow: 0 4px 0 rgba(0,0,0,0.1); position: relative; border: 1px solid #eee; }
        .post.pinned { border: 4px solid var(--yeeps-yellow); background: #fffbea; }
        
        .post-header { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
        .pfp-img { width: 45px; height: 45px; border-radius: 50%; object-fit: cover; border: 2px solid var(--yeeps-orange); cursor: pointer; }
        
        .badge { font-size: 0.65rem; padding: 2px 8px; border-radius: 10px; color: white; font-weight: bold; width: fit-content; margin-top: 2px; }
        .btn-del { color: red; background: none; border: none; cursor: pointer; font-size: 0.8rem; font-weight: bold; }
        .admin-panel { background: #fff9e6; padding: 15px; border-radius: 15px; border: 3px solid var(--yeeps-yellow); margin-bottom: 20px; width: 450px; text-align: center; }
        .music-ctrl { position: fixed; bottom: 20px; right: 20px; background: white; padding: 10px; border-radius: 50px; border: 2px solid var(--yeeps-orange); z-index: 1000; }
    </style>
</head>
<body>

    <nav class="top-nav">
        <a href="index.html">üè† Home</a>
        <a href="pages/profile-editor.html">‚öôÔ∏è My Profile</a>
        <a href="#" onclick="logout()" style="color:#ff4d4d;">Logout</a>
    </nav>

    <div class="music-ctrl">
        <button onclick="toggleMusic()" id="mBtn" style="border:none; background:none; cursor:pointer; font-size:1.2rem;">üîá</button>
        <audio id="bgMusic" loop><source src="music/SuburbTheme.ogg" type="audio/ogg"></audio>
    </div>

    <h1>üß± Yeeps-Share</h1>

    <div id="ownerTools" style="display:none;" class="admin-panel">
        <strong>üëë Owner Controls</strong><br><br>
        <input type="text" id="targetUser" placeholder="Username" style="width:150px;">
        <select id="roleSelect" style="padding:5px;">
            <option value="rat">Lab Rat</option>
            <option value="mod">Moderator</option>
            <option value="dev">Yeeps Dev</option>
            <option value="webdev">Website Dev</option>
            <option value="reviewer">Reviewer</option>
            <option value="none">Remove Role</option>
        </select>
        <button onclick="assignRole()" style="padding:5px 10px; cursor:pointer; font-weight:bold;">Apply</button>
    </div>

    <div class="input-box">
        <input type="text" id="mainPostContent" placeholder="What's the news in Yeeps?">
        <input type="text" id="mainPostImage" placeholder="Image URL (Optional)">
        <button onclick="submitNewPost()" style="width:100%; padding:10px; background:var(--yeeps-orange); color:white; border:none; border-radius:10px; font-weight:bold; cursor:pointer;">Post to Feed</button>
    </div>

    <div id="featured-zone"></div>
    <div id="feed"></div>

    <script>
        const ADMIN_NAME = "DatWeirdFNFfan";
        const currentUser = localStorage.getItem('current_yeep_user');

        if (!currentUser) { window.location.href = "login.html"; }

        function toggleMusic() {
            const m = document.getElementById('bgMusic');
            if(m.paused) { m.play(); document.getElementById('mBtn').innerText="üîä"; }
            else { m.pause(); document.getElementById('mBtn').innerText="üîá"; }
        }

        // --- POSTING SYSTEM ---
        function submitNewPost() {
            const content = document.getElementById('mainPostContent').value.trim();
            const img = document.getElementById('mainPostImage').value.trim();
            
            if(!content) { alert("Post cannot be empty!"); return; }

            let posts = JSON.parse(localStorage.getItem('yeepsPosts')) || [];
            const newPost = {
                id: Date.now(),
                username: currentUser,
                content: content,
                image: img,
                isPinned: false,
                pinnedAt: null
            };

            posts.push(newPost);
            localStorage.setItem('yeepsPosts', JSON.stringify(posts));
            
            // Clear inputs and reload
            document.getElementById('mainPostContent').value = "";
            document.getElementById('mainPostImage').value = "";
            loadFeed(); 
        }

        // --- ADMIN FUNCTIONS ---
        function assignRole() {
            const target = document.getElementById('targetUser').value.trim();
            const role = document.getElementById('roleSelect').value;
            let roles = JSON.parse(localStorage.getItem('yeeps_roles_db')) || {};
            if(role === "none") delete roles[target]; else roles[target] = role;
            localStorage.setItem('yeeps_roles_db', JSON.stringify(roles));
            alert("Role updated!"); loadFeed();
        }

        function deletePost(postId) {
            if(!confirm("Delete this post?")) return;
            let posts = JSON.parse(localStorage.getItem('yeepsPosts')) || [];
            posts = posts.filter(p => p.id !== postId);
            localStorage.setItem('yeepsPosts', JSON.stringify(posts));
            loadFeed();
        }

        function toggleFeature(postId) {
            let posts = JSON.parse(localStorage.getItem('yeepsPosts')) || [];
            const idx = posts.findIndex(p => p.id === postId);
            posts[idx].isPinned = !posts[idx].isPinned;
            posts[idx].pinnedAt = posts[idx].isPinned ? Date.now() : null;
            
            let pinned = posts.filter(p => p.isPinned).sort((a,b) => a.pinnedAt - b.pinnedAt);
            if(pinned.length > 25) posts.find(p => p.id === pinned[0].id).isPinned = false;

            localStorage.setItem('yeepsPosts', JSON.stringify(posts));
            loadFeed();
        }

        // --- RENDER SYSTEM ---
        function loadFeed() {
            const posts = JSON.parse(localStorage.getItem('yeepsPosts')) || [];
            const usersDB = JSON.parse(localStorage.getItem('yeeps_users_db')) || {};
            const rolesDB = JSON.parse(localStorage.getItem('yeeps_roles_db')) || {};
            
            const feed = document.getElementById('feed');
            const fFeed = document.getElementById('featured-zone');
            feed.innerHTML = ""; fFeed.innerHTML = "";
            
            const isOwner = (currentUser === ADMIN_NAME);

            posts.slice().reverse().forEach(p => {
                const userData = usersDB[p.username] || {};
                const pfp = userData.pfp || "https://ui-avatars.com/api/?name=" + p.username;
                const role = (p.username === ADMIN_NAME) ? "owner" : (rolesDB[p.username] || "");

                const div = document.createElement('div');
                div.className = `post ${p.isPinned ? 'pinned' : ''}`;
                
                div.innerHTML = `
                    <div class="post-header">
                        <img src="${pfp}" class="pfp-img" onclick="window.location.href='pages/user-profile.html?u=${p.username}'">
                        <div>
                            <strong style="cursor:pointer;" onclick="window.location.href='pages/user-profile.html?u=${p.username}'">${p.username}</strong>
                            ${role ? `<div class="badge" style="background:var(--role-${role})">${role.toUpperCase()}</div>` : ''}
                        </div>
                    </div>
                    <p style="margin: 10px 0;">${p.content}</p>
                    ${p.image ? `<img src="${p.image}" style="width:100%; border-radius:10px; margin-bottom:10px;">` : ''}
                    <div style="display:flex; gap:15px; align-items:center;">
                        <a href="pages/comments.html?postId=${p.id}" style="color:var(--yeeps-orange); font-weight:bold; text-decoration:none; font-size:0.85rem;">üí¨ Comments</a>
                        ${(isOwner || p.username === currentUser) ? `<button class="btn-del" onclick="deletePost(${p.id})">Delete</button>` : ''}
                        ${isOwner ? `<button onclick="toggleFeature(${p.id})" style="border:none; background:none; color:blue; cursor:pointer; font-size:0.8rem;">${p.isPinned ? 'Unfeature' : 'Feature'}</button>` : ''}
                    </div>
                `;
                p.isPinned ? fFeed.appendChild(div) : feed.appendChild(div);
            });
        }

        function logout() { localStorage.removeItem('current_yeep_user'); window.location.href="login.html"; }

        if(currentUser === ADMIN_NAME) document.getElementById('ownerTools').style.display = 'block';
        loadFeed();
    </script>
</body>
</html>
