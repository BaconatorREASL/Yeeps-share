<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yeeps-Share</title>
    <style>
        :root {
            --yeeps-orange: #FF8C00;
            --yeeps-yellow: #FFD700;
            --yeeps-blue: #87CEEB;
            --yeeps-dark: #333;
            --yeeps-pink: #ff4d94;
        }

        body {
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
            background-color: var(--yeeps-blue);
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 80px 20px 20px 20px;
        }

        /* --- MODALS --- */
        #loginOverlay, #roleModal { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.85); display: flex; 
            justify-content: center; align-items: center; z-index: 2000; 
        }
        
        .modal-box { 
            background: white; padding: 30px; border-radius: 20px; 
            text-align: center; border: 5px solid var(--yeeps-orange); width: 320px; 
        }

        /* --- POSTS & UI --- */
        .post { background: white; padding: 15px; margin-bottom: 20px; border-radius: 15px; width: 100%; max-width: 500px; box-shadow: 0 4px 0 rgba(0,0,0,0.05); }
        .pfp { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 2px solid var(--yeeps-orange); }
        
        .post-header { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
        .post-user { font-weight: bold; color: var(--yeeps-orange); display: flex; flex-direction: column; }
        
        .badge { font-size: 0.6rem; padding: 2px 8px; border-radius: 10px; color: white; text-transform: uppercase; width: fit-content; }
        .badge-owner { background: var(--yeeps-yellow); color: var(--yeeps-dark); }

        .input-container { background: white; padding: 20px; border-radius: 15px; width: 100%; max-width: 500px; margin-bottom: 30px; border: 4px solid var(--yeeps-orange); }
        input, select { width: 90%; padding: 10px; margin-bottom: 10px; border: 2px solid #ddd; border-radius: 10px; font-family: inherit; }
        
        .btn-main { padding: 10px; background: var(--yeeps-orange); color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; }
        .top-nav { position: fixed; top: 0; width: 100%; background: rgba(0, 0, 0, 0.8); padding: 10px 0; display: flex; justify-content: center; gap: 15px; z-index: 1000; }
        .top-nav a { color: white; text-decoration: none; font-weight: bold; font-size: 0.8rem; }
    </style>
</head>
<body>

    <div id="loginOverlay">
        <div class="modal-box">
            <h2>Yeeps-Share</h2>
            <input type="text" id="loginUsername" placeholder="Username">
            <input type="password" id="loginPassword" placeholder="Password">
            <input type="text" id="loginPfp" placeholder="PFP Image URL (Optional)">
            <button class="btn-main" style="width:100%" onclick="performLogin()">Login / Register</button>
        </div>
    </div>

    <div id="roleModal" style="display:none;">
        <div class="modal-box">
            <h3>Assign Role</h3>
            <input type="text" id="targetUser" placeholder="Username">
            <select id="roleSelect">
                <option value="rat">Lab Rat</option>
                <option value="reviewer">Reviewer</option>
                <option value="mod">Moderator</option>
                <option value="dev">Yeeps Dev</option>
                <option value="webdev">Website Dev</option>
                <option value="none">Remove Role</option>
            </select>
            <button class="btn-main" style="width:100%" onclick="saveRoleFromPopup()">Apply Role</button>
            <button onclick="document.getElementById('roleModal').style.display='none'" style="background:none; border:none; cursor:pointer; margin-top:10px;">Close</button>
        </div>
    </div>

    <nav class="top-nav">
        <a href="https://www.meta.com/experiences/7276525889052788/" target="_blank">üéÆ Play</a>
        <a href="https://discord.gg/yeeps" target="_blank">üí¨ Discord</a>
        <a href="#" onclick="logout()" style="color: #ff4d4d;">Logout</a>
    </nav>

    <h1>üß± Yeeps-Share</h1>

    <div id="ownerTools" style="display:none; margin-bottom: 20px;">
        <button class="btn-main" style="background: var(--yeeps-yellow); color:black;" onclick="document.getElementById('roleModal').style.display='flex'">üëë Role Manager</button>
    </div>

    <div class="input-container">
        <input type="text" id="postText" placeholder="What's up?">
        <select id="mediaType">
            <option value="none">Text Only</option>
            <option value="image">üñºÔ∏è Image</option>
            <option value="link">üîó Link</option>
        </select>
        <input type="text" id="mediaUrl" placeholder="URL here..." style="display:none;">
        <button class="btn-main" style="width:100%" onclick="addPost()">Post</button>
    </div>

    <div id="feed" style="width: 100%; max-width: 500px;"></div>

    <script>
        const ADMIN_USERNAME = "DatWeirdFNFfan";
        // SET YOUR ADMIN PASSWORD HERE:
        const ADMIN_PASS = "yeep123"; 

        let isAdmin = false;

        function performLogin() {
            const user = document.getElementById('loginUsername').value.trim();
            const pass = document.getElementById('loginPassword').value.trim();
            const pfp = document.getElementById('loginPfp').value.trim() || "https://ui-avatars.com/api/?name=" + user;

            if(!user || !pass) { alert("Need Name & Password!"); return; }

            let usersDB = JSON.parse(localStorage.getItem('yeeps_users_db')) || {};

            // Admin Check
            if(user === ADMIN_USERNAME) {
                if(pass !== ADMIN_PASS) { alert("Wrong Admin Password!"); return; }
                isAdmin = true;
            } else if (usersDB[user] && usersDB[user].password !== pass) {
                alert("Incorrect password for this username!");
                return;
            }

            // Save user data
            usersDB[user] = { password: pass, pfp: pfp };
            localStorage.setItem('yeeps_users_db', JSON.stringify(usersDB));
            localStorage.setItem('current_yeep_user', user);
            
            location.reload();
        }

        function renderPost(post) {
            const usersDB = JSON.parse(localStorage.getItem('yeeps_users_db')) || {};
            const rolesDB = JSON.parse(localStorage.getItem('yeeps_roles_db')) || {};
            
            const userPfp = usersDB[post.username]?.pfp || "https://ui-avatars.com/api/?name=" + post.username;
            const role = rolesDB[post.username] || "";

            const postDiv = document.createElement('div');
            postDiv.className = 'post';

            let badgeHTML = post.username === ADMIN_USERNAME ? '<span class="badge badge-owner">Owner</span>' : (role ? `<span class="badge" style="background:gray">${role}</span>` : '');

            postDiv.innerHTML = `
                <div class="post-header">
                    <img src="${userPfp}" class="pfp">
                    <div class="post-user">
                        <span>${post.username}</span>
                        ${badgeHTML}
                    </div>
                </div>
                <div>${post.content}</div>
                ${post.mediaType === 'image' ? `<img src="${post.mediaUrl}" style="width:100%; border-radius:10px; margin-top:10px;">` : ''}
                <div style="margin-top:10px;">
                    <button onclick="deletePost(${post.id})" style="border:none; background:none; cursor:pointer; color:red; font-size:0.7rem; ${(isAdmin || post.username === localStorage.getItem('current_yeep_user')) ? '' : 'display:none'}">Delete</button>
                </div>
            `;
            return postDiv;
        }

        function addPost() {
            const text = document.getElementById('postText').value;
            const type = document.getElementById('mediaType').value;
            const url = document.getElementById('mediaUrl').value;
            const user = localStorage.getItem('current_yeep_user');

            if(!text) return;

            let posts = JSON.parse(localStorage.getItem('yeepsPosts')) || [];
            posts.push({ id: Date.now(), username: user, content: text, mediaType: type, mediaUrl: url });
            localStorage.setItem('yeepsPosts', JSON.stringify(posts));
            location.reload();
        }

        function saveRoleFromPopup() {
            const target = document.getElementById('targetUser').value.trim();
            const role = document.getElementById('roleSelect').value;
            let rolesDB = JSON.parse(localStorage.getItem('yeeps_roles_db')) || {};
            if(role === "none") delete rolesDB[target]; else rolesDB[target] = role;
            localStorage.setItem('yeeps_roles_db', JSON.stringify(rolesDB));
            location.reload();
        }

        function deletePost(id) {
            let posts = JSON.parse(localStorage.getItem('yeepsPosts')) || [];
            posts = posts.filter(p => p.id !== id);
            localStorage.setItem('yeepsPosts', JSON.stringify(posts));
            location.reload();
        }

        function logout() { localStorage.removeItem('current_yeep_user'); location.reload(); }

        document.addEventListener('DOMContentLoaded', () => {
            const currentUser = localStorage.getItem('current_yeep_user');
            if(currentUser) {
                document.getElementById('loginOverlay').style.display = 'none';
                if(currentUser === ADMIN_USERNAME) document.getElementById('ownerTools').style.display = 'block';
                loadPosts();
            }
        });

        function loadPosts() {
            const posts = JSON.parse(localStorage.getItem('yeepsPosts')) || [];
            const feed = document.getElementById('feed');
            posts.reverse().forEach(p => feed.appendChild(renderPost(p)));
        }

        document.getElementById('mediaType').addEventListener('change', function() {
            document.getElementById('mediaUrl').style.display = this.value === 'none' ? 'none' : 'block';
        });
    </script>
</body>
</html>
