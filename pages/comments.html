<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Comments | Yeeps-Share</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <nav class="top-nav"><a href="../index.html">üè† Home</a></nav>
    <div class="input-box" style="margin-top:20px;">
        <h3>Comments</h3>
        <div id="list"></div>
        <hr>
        <textarea id="msg" placeholder="Type a comment..."></textarea>
        <button onclick="send()" style="width:100%; padding:10px; background:var(--yeeps-orange); color:white; border:none; border-radius:10px;">Reply</button>
    </div>
    <script>
        const pid = new URLSearchParams(window.location.search).get('postId');
        const user = localStorage.getItem('current_yeep_user');
        function load() {
            const all = JSON.parse(localStorage.getItem('yeeps_comments')) || {};
            const coms = all[pid] || [];
            const list = document.getElementById('list');
            list.innerHTML = coms.length ? "" : "Be the first to comment!";
            coms.forEach(c => { list.innerHTML += `<div style="padding:10px 0; border-bottom:1px solid #eee;"><b>${c.user}:</b> ${c.text}</div>`; });
        }
        function send() {
            const txt = document.getElementById('msg').value;
            if(!txt) return;
            let all = JSON.parse(localStorage.getItem('yeeps_comments')) || {};
            if(!all[pid]) all[pid] = [];
            all[pid].push({user: user, text: txt});
            localStorage.setItem('yeeps_comments', JSON.stringify(all));
            document.getElementById('msg').value = "";
            load();
        }
        load();
    </script>
</body>
</html>
