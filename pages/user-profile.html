<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Profile | Yeeps-Share</title>
    <style>
        body { font-family: sans-serif; background: #87CEEB; display: flex; flex-direction: column; align-items: center; padding: 50px; }
        .profile-card { background: white; padding: 30px; border-radius: 20px; width: 400px; text-align: center; margin-bottom: 20px; }
        .pfp-large { width: 100px; height: 100px; border-radius: 50%; border: 4px solid #FF8C00; }
        .post-mini { background: white; padding: 15px; border-radius: 10px; width: 400px; margin-bottom: 10px; }
    </style>
</head>
<body>
    <a href="../Yeeps-share/index.html" style="color:white; text-decoration:none; font-weight:bold; margin-bottom:20px;">â¬… Back to Feed</a>
    
    <div id="profileInfo"></div>
    <h3>Posts by this Yeep</h3>
    <div id="userPosts"></div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const targetUser = params.get('u');

        function loadProfile() {
            const usersDB = JSON.parse(localStorage.getItem('yeeps_users_db')) || {};
            const userData = usersDB[targetUser] || {};
            const pfp = userData.pfp || "https://ui-avatars.com/api/?name=" + targetUser;

            document.getElementById('profileInfo').innerHTML = `
                <div class="profile-card">
                    <img src="${pfp}" class="pfp-large">
                    <h2>${targetUser}</h2>
                    <p>${userData.bio || "This user hasn't set a bio yet."}</p>
                </div>
            `;

            const allPosts = JSON.parse(localStorage.getItem('yeepsPosts')) || [];
            const userPosts = allPosts.filter(p => p.username === targetUser);
            const list = document.getElementById('userPosts');

            userPosts.reverse().forEach(p => {
                list.innerHTML += `
                    <div class="post-mini">
                        <p>${p.content}</p>
                        ${p.image ? `<img src="${p.image}" style="width:100%; border-radius:10px;">` : ''}
                    </div>
                `;
            });
        }
        loadProfile();
    </script>
</body>
</html>
